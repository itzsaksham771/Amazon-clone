<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="shortcut icon" href="favicon.io.ico" type="image/x-icon" />

    <title>Amazon India</title>
  </head>

  <body>
    <div class="container">
      <nav>
        <div class="logo">
          <img src="logo.png" alt="main-logo" />
          <span>.in</span>
        </div>

        <!-- Update the location div -->
        <div class="set_location ln-height border" onclick="updateLocation()">
            <p class="first-line">Delivering to Aligarh 202130</p>
            <p class="second-line">
                <i class="fa-solid fa-location-dot"></i>
                Update location
            </p>
        </div>

        <!-- Update the search box -->
        <div class="search_box">
            <div>All <i class="fa-solid fa-caret-down"></i></div>
            <input type="text" placeholder="Search Amazon.in" onkeypress="if(event.key === 'Enter') handleSearch(event)" />
            <div class="camera_search">
                <i class="fa-solid fa-camera"></i>
            </div>
            <div class="search" onclick="handleSearch(event)">
                <i class="fa-solid fa-magnifying-glass"></i>
            </div>
        </div>

        <div class="choose_country border">
          <div class="flag">
            <img
              src="indian flag.png"
              alt="country flag"
              height="25px"
            />
          </div>
          <select name="" id="" title="Choose your country">
            <option value="EN">IN</option>
            <option value="EN">EN</option>
            <option value="EN">US</option>
          </select>
        </div>

        <div class="ac_info ln-height border" onclick="toggleLoginModal()">
          <p class="first-line">Hello, <span id="userName">sign in</span></p>
          <p class="second-line">
            Accounts & Lists <i class="fa-solid fa-caret-down"></i>
          </p>
        </div>

        <div class="orders ln-height border">
          <p class="first-line">Returns</p>
          <p class="second-line">& Orders</p>
        </div>

        <div class="cart border">
          <i class="fa-solid fa-cart-arrow-down"></i>
          <p class="second-line">Cart</p>
        </div>
      </nav>

      <div class="menuBar">
        <ul>
          <li><a href="" class="border">
            <i class="fa-solid fa-bars"></i>
            <span>All</span>
          </a></li>
          <li><a class="border">Amazon miniTV</a></li>
          <li><a class="border">Sell</a></li>
          <li><a class="border">Best Sellers</a></li>
          <li><a class="border">Mobiles</a></li>
          <li><a class="border">Today's Deals</a></li>
          <li><a class="border">New Releases</a></li>
          <li><a class="border">Customer Service</a></li>
          <li><a class="border">
            <select title="Prime Options">
              <option value="">Prime</option>
              <option value="option2">Free</option>
              <option value="option3">Premium</option>
            </select>
          </a></li>
          <li><a class="border">Electronics</a></li>
          <li><a class="border">Gift Ideas</a></li>
          <li><a class="border">Fashion</a></li>
        </ul>

        <div class="location">
          <i class="fa-solid fa-location-dot"></i>
          <p>Select a location to see product availability</p>
          <i class="fa-solid fa-angle-down"></i>
        </div>
      </div>

      <div class="quickLink">
        <h2>Amazon Fashion</h2>
        <ul>
          <li><a>Women</a></li>
          <li><a>Men</a></li>
          <li><a>Kids</a></li>
          <li><a>Bags & Luggage</a></li>
          <li><a>Sportswear</a></li>
          <li><a>Sales & Deals</a></li>
        </ul>
        <div>
          <p>30 DAY RETURNS</p>
          <p>Restrictions Apply</p>
        </div>
      </div>

      <div class="heroPage">
        <div class="linearShade"></div>
      </div>

      <div class="cards">
        <!-- card 1 -->
        <div class="card">
          <div class="cardHeading">
            Bluetooth Calling Smartwatch starts at ₹1,999
          </div>
          <img src="Watch.jpg" alt="" />
          <a href="">Shop Now</a>
        </div>
        <!-- card 2 -->
        <div class="card">
          <div class="cardHeading">Revamp your home in style</div>
          <div class="cardContainer">
            <div class="product">
              <img src="A1.jpg" alt="" />
              <p>Home decor</p>
            </div>
            <div class="product">
              <img src="A2.jpg" alt="" />
              <p>Home furnishings</p>
            </div>
            <div class="product">
              <img src="A3.jpg" alt="" />
              <p>Home storage</p>
            </div>
            <div class="product">
              <img src="A4.jpg" alt="" />
              <p>Lighting solutions</p>
            </div>
          </div>
          <a href="">Explore all</a>
        </div>
        <!-- card 3 -->
        <div class="card">
          <div class="cardHeading">Up to 75% off | Headphones</div>
          <div class="cardContainer">
            <div class="product">
              <img src="B1.jpg" alt="" />
              <p>Up to 75% off | boAt</p>
            </div>
            <div class="product">
              <img src="B2.jpg" alt="" />
              <p>Up to 75% off | boult</p>
            </div>
            <div class="product">
              <img src="B3.jpg" alt="" />
              <p>Up to 75% off | Noise</p>
            </div>
            <div class="product">
              <img src="B4.jpg" alt="" />
              <p>Up to 75% off | Zebronics</p>
            </div>
          </div>
          <a href="">See all offers</a>
        </div>
        <!-- card 4 -->
        <div class="card">
          <div class="cardHeading">Up to 70% off | Styles for men</div>
          <div class="cardContainer">
            <div class="product">
              <img src="C1.jpg" alt="" />
              <p>Clothing</p>
            </div>
            <div class="product">
              <img src="C2.jpg" alt="" />
              <p>Footwear</p>
            </div>
            <div class="product">
              <img src="C3.jpg" alt="" />
              <p>Watches</p>
            </div>
            <div class="product">
              <img src="C4.jpg" alt="" />
              <p>Bags & wallet</p>
            </div>
          </div>
          <a href="">Mega Fashion Days</a>
        </div>
        <!-- card 5 -->
        <div class="card">
          <div class="cardHeading">
            Starting ₹99 | All your home improvement needs
          </div>
          <div class="cardContainer">
            <div class="product">
              <div class="img-container">
                <img src="D1.jpg" alt="Spin mops" />
              </div>
              <p>Spin mops, wipes & more</p>
            </div>
            <div class="product">
              <div class="img-container">
                <img src="D2.jpg" alt="Bathroom hardware" />
              </div>
              <p>Bathroom hardware & accessories</p>
            </div>
            <div class="product">
              <div class="img-container">
                <img src="D3.jpg" alt="Tools" />
              </div>
              <p>Hammers, screwdrivers & more</p>
            </div>
            <div class="product">
              <div class="img-container">
                <img src="D4.jpg" alt="Electronics" />
              </div>
              <p>Extension boards, plugs & more</p>
            </div>
          </div>
          <a href="">Explore all</a>
        </div>
        <!-- card 6 -->
        <div class="card">
          <div class="cardHeading">
            Starting ₹99 | All your home improvement needs
          </div>
          <div class="cardContainer">
            <div class="product">
              <img src="E1.jpg" alt="" />
              <p>Gaming Accessories</p>
            </div>
            <div class="product">
              <img src="E2.jpg" alt="" />
              <p>Keyboard and Mice</p>
            </div>
            <div class="product">
              <img src="E3.jpg" alt="" />
              <p>Stands, Cables & more</p>
            </div>
            <div class="product">
              <img src="E4.jpg" alt="" />
              <p>Backpacks</p>
            </div>
          </div>
          <a href="">See all offers</a>
        </div>
        <!-- card 7 -->
        <div class="card">
          <div class="cardHeading">Up to 70% off | Styles for women</div>
          <div class="cardContainer">
            <div class="product">
              <img src="F1.jpg" alt="" />
              <p>Women's Clothing</p>
            </div>
            <div class="product">
              <img src="F2.jpg" alt="" />
              <p>Footwear+Handbags</p>
            </div>
            <div class="product">
              <img src="F3.jpg" alt="" />
              <p>Watches</p>
            </div>
            <div class="product">
              <img src="F4.jpg" alt="" />
              <p>Fashion jewellery</p>
            </div>
          </div>
          <a href="">Mega Fashion Days</a>
        </div>
        <!-- card 8 -->
        <div class="card">
          <div class="cardHeading">
            Appliances for your home | Up to 55% off
          </div>
          <div class="cardContainer">
            <div class="product">
              <img src="G1.jpg" alt="" />
              <p>Air conditioners</p>
            </div>
            <div class="product">
              <img src="G2.jpg" alt="" />
              <p>Refrigerators</p>
            </div>
            <div class="product">
              <img src="G3.jpg" alt="" />
              <p>Microwaves</p>
            </div>
            <div class="product">
              <img src="G4.jpg" alt="" />
              <p>Washing machines</p>
            </div>
          </div>
          <a href="">See more</a>
        </div>
        <!-- card 9 -->
        <div class="card">
          <div class="cardHeading">Starting ₹99 | Toys for your kids</div>
          <div class="cardContainer">
            <div class="product">
              <img src="H1.jpg" alt="" />
              <p>Starting ₹299 | Bikes, trikes & ride-ons</p>
            </div>
            <div class="product">
              <img src="H2.jpg" alt="" />
              <p>Starting ₹149 | Sport & outdoor</p>
            </div>
            <div class="product">
              <img src="H3.jpg" alt="" />
              <p>Starting ₹99 | Soft toys</p>
            </div>
            <div class="product">
              <img src="H4.jpg" alt="" />
              <p>Starting ₹199 | Indoor games</p>
            </div>
          </div>
          <a href="">See more</a>
        </div>
      </div>

      <div class="newUser">
        <div class="newcustomer">
          <div>See personalized recommendations</div>
          <button type="button">Sign in</button>
          <p>New customer? <a href="">Start here.</a></p>
        </div>
      </div>

      <div class="backTop">
        <i class="fa-solid fa-caret-up"></i>
        <a href="#">Back to top</a>
        <a href="">TOP OF PAGE</a>
      </div>

      <div class="socialHandle">
        <div class="sh-part-1">
          <ul>
            <li>Get to Know Us</li>
            <li>About Us</li>
            <li>Careers</li>
            <li>Press Releases</li>
            <li>Amazon Science</li>
          </ul>
          <ul>
            <li>Connect with US</li>
            <li>Facebook</li>
            <li>Twitter</li>
            <li>Instagram</li>
          </ul>
          <ul>
            <li>Make Money with Us</li>
            <li>Sell on Amazon</li>
            <li>Sell under Amazon Accelerator</li>
            <li>Protect and Build Your Brand</li>
            <li>Amazon Global Selling</li>
            <li>Become an Affiliate</li>
            <li>Fulfillment by Amazon</li>
            <li>Advertise Your Products</li>
            <li>Amazon Pay on Merchants</li>
          </ul>
          <ul>
            <li>Let Us Help You</li>
            <li>COVID-19 and Amazon</li>
            <li>Your Account</li>
            <li>Returns centre</li>
            <li>100% Purchase Protection</li>
            <li>Amazon App Download</li>
            <li>Help</li>
          </ul>
        </div>
        <div class="sh-part-2">
          <div class="foot-logo">
            <img src="logo.png" alt="" />
            <button type="button">
              <i class="fa-solid fa-globe"></i>
              English
              <i class="fa-solid fa-sort"></i>
            </button>
          </div>
          <div class="locations">
            <span>Australia</span>
            <span>Brazil</span>
            <span>Canada</span>
            <span>China</span>
            <span>France</span>
            <span>Germany</span>
            <span>Italy</span>
            <span>Japan</span>
            <span>Mexico</span>
            <span>Netherlands</span>
            <span>Poland</span>
            <span>Singapore</span>
            <span>Spain</span>
            <span>Turkey</span>
            <span>United Arab Emirates</span>
            <span>United Kingdom</span>
            <span>United States </span>
          </div>
        </div>

        <div class="sh-part-m">
          <ul>
            <li>Your Amazon.in</li>
            <li>Amazon Pay</li>
            <li>Wish List</li>
            <li>Your Account</li>
            <li>Returns</li>
            <li>Customer Service</li>
            <li>Your Orders</li>
            <li>Amazon App Download</li>
            <li>Find a Wish List</li>
            <li>Your Recently Viewed Items</li>
            <li>Sell</li>
          </ul>
        </div>
      </div>

      <footer>
        <div class="footer-part-1">
          <ul>
            <li>AbeBooks</li>
            <li>Books, art</li>
            <li>& collectibles</li>
          </ul>
          <ul>
            <li>Amazon Web Services</li>
            <li>Scalable Cloud</li>
            <li>Computing Services</li>
          </ul>
          <ul>
            <li>Audible</li>
            <li>Download</li>
            <li>Audio Books</li>
          </ul>
          <ul>
            <li>DPReview</li>
            <li>Digital</li>
            <li>Photography</li>
          </ul>
          <ul>
            <li>IMDb</li>
            <li>Movies, TV</li>
            <li>& Celebrities</li>
          </ul>
          <ul>
            <li>Amazon Business</li>
            <li>Everything For</li>
            <li>Your Business</li>
          </ul>
          <ul>
            <li>Prime Now</li>
            <li>2-Hours Delivery</li>
            <li>on Everyday Items</li>
          </ul>
          <ul>
            <li>Amazon Prime Music</li>
            <li>100 million songs, ad-free</li>
            <li>Over 15 million podcast episodes</li>
          </ul>
        </div>

        <div class="footer-part-sm">
          <div class="lang">
            <i class="fa-solid fa-globe"></i>
            English
          </div>
          <h3><a href="">Already a customer? Sign in</a></h3>
        </div>

        <div class="footer-part-2">
          <p>
            <a href="">Conditions of Use & Sale</a>
            <a href="">Privacy Notice</a> <a href="">Interest-Based Ads</a>
          </p>
          <p>&copy; 1996-2023, Amazon.com, Inc. or its affiliates</p>
        </div>
      </footer>
    </div>
    <script>
        async function getProducts() {
          const res = await fetch("/api/products");
          const data = await res.json();
          console.log("Products:", data);
        }
      
        async function loginUser() {
          const res = await fetch("/api/auth/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email: "test@example.com", password: "1234" })
          });
          const data = await res.json();
          console.log("Login Response:", data);
        }
      
        getProducts();
        loginUser();
      </script>
      
  </body>

<!-- Add this before closing body tag -->
<div id="locationModal" class="modal">
    <div class="modal-content">
        <h2>Choose your location</h2>
        <form id="locationForm" onsubmit="updateUserLocation(event)">
            <input type="text" id="pincode" placeholder="Enter PIN code" required>
            <button type="submit">Apply</button>
        </form>
        <button onclick="document.getElementById('locationModal').style.display='none'">Cancel</button>
    </div>
</div>

<!-- Update the script section -->
<script>
let cartItems = [];
let isLoggedIn = false;

async function handleLogin(event) {
  event.preventDefault();
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;

  try {
    const response = await fetch('/api/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password })
    });
    
    const data = await response.json();
    if (data.success) {
      isLoggedIn = true;
      document.getElementById('userName').textContent = data.user.name;
      document.getElementById('loginModal').style.display = 'none';
      localStorage.setItem('token', data.token);
    }
  } catch (error) {
    console.error('Login failed:', error);
  }
}

function toggleLoginModal() {
  const modal = document.getElementById('loginModal');
  modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
}

// Cart functionality
async function addToCart(productId) {
  if (!isLoggedIn) {
    toggleLoginModal();
    return;
  }

  try {
    const response = await fetch('/api/cart/add', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${localStorage.getItem('token')}`
      },
      body: JSON.stringify({ productId })
    });
    
    const data = await response.json();
    updateCartCount(data.cartCount);
  } catch (error) {
    console.error('Failed to add to cart:', error);
  }
}

function updateCartCount(count) {
  const cartElement = document.querySelector('.cart');
  cartElement.querySelector('.second-line').textContent = `Cart (${count})`;
}

// Load products dynamically
async function loadProducts() {
  try {
    const response = await fetch('/api/products');
    const products = await response.json();
    
    const cards = document.querySelector('.cards');
    products.forEach(product => {
      // Add product cards dynamically
      // This is just a sample structure
      const productCard = `
        <div class="card">
          <div class="cardHeading">${product.name}</div>
          <img src="${product.image}" alt="${product.name}" />
          <p class="price">₹${product.price}</p>
          <button onclick="addToCart('${product.id}')">Add to Cart</button>
        </div>
      `;
      cards.innerHTML += productCard;
    });
  } catch (error) {
    console.error('Failed to load products:', error);
  }
}

// Initialize
window.onload = function() {
  loadProducts();
  // Check if user is already logged in
  const token = localStorage.getItem('token');
  if (token) {
    // Verify token and update UI
    verifyToken(token);
  }
}
</script>
      </div>
    </div>
  </body>
</html>
